<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.3c9a6c1fb5b7f7c1b53e.css">*,:after,:before{box-sizing:border-box}body{color:#3d3d3d;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Helvetica Neue,Arial,sans-serif;font-size:16px;line-height:1.625;text-rendering:optimizeLegibility;margin:0 auto;padding:20px;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased}@media (min-width:768px){body{font-size:17.5px}}a{color:#0366d6;text-decoration:none}a:hover{text-decoration:underline}p{margin:0 0 1em}#layout{max-width:42rem;margin-left:auto;margin-right:auto}@media (min-width:1024px){#layout{max-width:48rem}#container{width:87.5%}}h1,h2,h3,h4{line-height:normal;margin:0;font-weight:500}h1{font-size:2em}h2,h3,h4{margin-top:1.5em;margin-bottom:.625em}h2{font-size:1.5em}h3{font-size:1.25em}h4{font-size:1.05em}ol,ul{padding-left:0;margin:5px 0 1em;list-style-type:none}ol>li,ul>li{text-indent:0;margin:.3em 0}p+ol,p+ul{margin-top:-.7em}ol{list-style-type:decimal}hr{background-color:#e1e4e8;border:0;height:1px;margin:24px 0;padding:0}.vim-cursor{display:inline-block;background-color:#5f5f5e;color:#fff;margin-bottom:-5px;margin-left:3px;width:10px;height:18px}blockquote{margin:1.5em 0 1.5em 1.8em;color:#5a5a5a;position:relative;font-style:italic}blockquote:before{font-family:georgia,serif;font-size:3.6em;position:absolute;content:"\201C";line-height:1em;font-style:normal;left:-.5em;top:0}cite{display:block;text-align:right;color:#3d3d3d}cite:before{content:"\2014   "}table{border:2px solid #000;border-right:none;border-left:none;border-collapse:collapse;min-width:100%;margin:2em auto}@media (min-width:576px){table{min-width:20rem}}td,th{padding:5px 10px;text-align:left}th{border-bottom:1px solid #000}.mono{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace}#post-list .date{color:#aaa}figure{margin:0 0 1.4em}#blog-post figure{margin-top:1.4em}figcaption:before{font-variant:small-caps;content:"Figure \2013   "}figcaption{text-align:center;margin-top:1em;margin-bottom:1.4em}iframe{border:none;width:1px;min-width:100%;margin:0 auto 1em}img{max-width:100%;display:block;margin:0 auto}strong{font-weight:500}.katex-display{overflow-x:auto;overflow-y:hidden}code[class*=language-],pre[class*=language-]{color:#333;background:none;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#fafafa}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-makefile .token.symbol,.language-markdown .token.url{color:#795da3}.language-makefile .token.variable{color:#183691}.language-bash .token.keyword,.language-makefile .token.builtin{color:#0086b3}code{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace}:not(pre)>code[class*=language-],pre[class*=language-]{font-size:.9em}.gatsby-highlight pre[class*=language-]:before{background:#ddd;border-radius:0 0 4px 4px;font-size:.75rem;font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;letter-spacing:.075em;line-height:1;padding:.25rem .5rem;position:absolute;right:1.5rem;text-align:right;top:0}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}#blog-post nav>ul{padding:0}#blog-post-content ol,#blog-post-content ul{padding-left:1.5em}#blog-post-content ul>li{list-style-type:disc}#blog-post-footer{display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:0}</style><meta name="generator" content="Gatsby 2.2.5"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">Basics of Functional Programming | Vincent Cordobes</title><link data-react-helmet="true" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous"/><meta data-react-helmet="true" name="google-site-verification" content="kjM2mfXvQ9XJ7BqEPTHNHWZ62wJsC5G_GtuPX1oy0EY"/><meta data-react-helmet="true" name="description" content="Gonna talk about basics of fp"/><meta data-react-helmet="true" property="og:url" content="https://vincentcordobes.github.io/fp-basics/"/><meta data-react-helmet="true" property="og:title" content="Basics of Functional Programming"/><meta data-react-helmet="true" name="og:description" content="Gonna talk about basics of fp"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@VincentCordobes"/><meta data-react-helmet="true" name="twitter:title" content="Basics of Functional Programming"/><meta data-react-helmet="true" name="twitter:description" content="Gonna talk about basics of fp"/><link as="script" rel="preload" href="/styles-9dcf0f99f3c7fd2e7438.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-2ee324bf92ea9aaecc36.js"/><link as="script" rel="preload" href="/3-1cc8080b6edca50ed51d.js"/><link as="script" rel="preload" href="/2-1c0803bc6ab86b1d9f68.js"/><link as="script" rel="preload" href="/app-de4e1f59c3e3b0d6a3ba.js"/><link as="script" rel="preload" href="/webpack-runtime-e66a3ce9287d241d7855.js"/><link as="fetch" rel="preload" href="/static/d/859/path---fp-basics-a-0-e-465-WU4nLcah9mbGrEn2A4qQfAWhFqE.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div id="layout"><div id="container"><div id="blog-post"><header><nav><ul><li><a rel="home" href="/">Home</a></li></ul></nav></header><h1>Basics of Functional Programming</h1><p><small class="mono">January 31, 2019</small></p><div id="blog-post-content"><p>The essence of programming is composition.  In the OOP paradigm we are building sofware by using Object that communicates with each other. To build bigger software we compose those objects.</p>
<p>In FP the building block is a function! Each function operates on data.
The software is made using functions, and we compose them to build bigger software.</p>
<p>What is functional programming? What are those principles?
Gonna talk here about the very basics of FP using the functional language OCaml</p>
<p>FP see programming in a mathematical way.</p>
<p>Major difference between functional languages and imperative languages is</p>
<h3 id="expression-vs-statements"><a href="#expression-vs-statements" aria-label="expression vs statements permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Expression vs Statements</h3>
<p>An expression is everything that can be evaluated to produce a value.</p>
<h4 id="in-imperative-languages"><a href="#in-imperative-languages" aria-label="in imperative languages permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>In imperative languages</h4>
<p>Since in OCaml everything is an expression, I‚Äôm going to use javascript to highlight the differences.
Here is an example of an expression: </p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> circumference <span class="token operator">=</span> 
   <span class="token comment">// It evaluates to a number</span>
   <span class="token number">2</span> <span class="token operator">*</span> <span class="token constant">PI</span> <span class="token operator">*</span> radius </code></pre></div>
<p>On the contrary <code class="language-text">if-else</code> are not expressions in javascript, meaning that you can‚Äôt do that:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// This is not a javascript valid syntax!</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> 
  <span class="token keyword">if</span> <span class="token punctuation">(</span>moi <span class="token operator">===</span> <span class="token string">'Vincent'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>Same goes for statements <code class="language-text">for</code>, <code class="language-text">while</code>, <code class="language-text">switch</code>, <code class="language-text">try ... catch</code>, <code class="language-text">break</code> etc‚Ä¶ That‚Äôs a lot of keywords for a single language üòú </p>
<h4 id="and-what-about-in-fp-languages-"><a href="#and-what-about-in-fp-languages-" aria-label="and what about in fp languages  permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>And what about in FP languages ?</h4>
<p>Previously I said everything was an expression in OCaml. But what about the  <code class="language-text">if-else</code>, <code class="language-text">for-loop</code>‚Ä¶? they exist, but those are also expressions!</p>
<p><code class="language-text">if-else</code> is evaluated to its body content:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> message <span class="token operator">=</span> 
  <span class="token keyword">if</span> language <span class="token operator">=</span> <span class="token string">"ocaml"</span> <span class="token keyword">then</span> 
    <span class="token string">"I quite like FP"</span> 
  <span class="token keyword">else</span> 
    <span class="token string">"Sorry, what?"</span>
<span class="token comment">(* val message : string *)</span></code></pre></div>
<p><code class="language-text">for</code> and <code class="language-text">while</code> loop are evaluated to the <code class="language-text">unit</code> type:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">to</span> <span class="token number">3</span> <span class="token keyword">do</span> printf <span class="token string">"%d"</span> i <span class="token keyword">done</span>
<span class="token comment">(* unit = () *)</span></code></pre></div>
<p>And so on.</p>
<h3 id="immutability"><a href="#immutability" aria-label="immutability permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Immutability</h3>
<p>An immutable variable means its value can‚Äôt be changed after it‚Äôs created.
If you want to modify it, well you don‚Äôt. Instead you create a new variable with the new value.</p>
<p>In OCaml record fields are immutable by default.</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> me <span class="token operator">=</span> <span class="token punctuation">{</span>
  first<span class="token punctuation">_</span>name <span class="token operator">=</span> <span class="token string">"Vincent"</span><span class="token punctuation">;</span>
  last<span class="token punctuation">_</span>name  <span class="token operator">=</span> <span class="token string">"Cordobes"</span><span class="token punctuation">;</span>
  age        <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>If you try to update <code class="language-text">me</code>, you‚Äôll get an error:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml">me<span class="token punctuation">.</span>age <span class="token operator">&lt;-</span> <span class="token number">35</span> <span class="token comment">(* error: the record field age is not mutable *)</span></code></pre></div>
<p>Instead you need to create a new variable:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> new<span class="token punctuation">_</span>me <span class="token operator">=</span> <span class="token punctuation">{</span> me <span class="token keyword">with</span> age <span class="token operator">=</span> <span class="token number">35</span> <span class="token punctuation">}</span></code></pre></div>
<p>In some other languages objects are mutables by default which can lead to many ‚Äúwtf!‚Äù<br>
For example in javascript:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> me <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Vince'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">23</span> <span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>me<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 23</span>
<span class="token function">sayAge</span><span class="token punctuation">(</span>me<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>me<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 498</span></code></pre></div>
<div style="position:absolute;
            font-size: 25px;
            transform: translate(10em, -1.2em);">ü§î</div>
<br />
<p>Who is responsible for that age change? It must be <code class="language-text">printAge</code>! It‚Äôs the only function call we have between the two <code class="language-text">console.log</code>. But wait‚Ä¶ can we really trust <code class="language-text">console.log</code> ? What if I tell you it‚Äôs been monkey patched? Replaced by a custom bugged logger üôà Okay chances are low but if one is being imaginative, it‚Äôs possible.
The point is that in a mutable world we can‚Äôt really trust anything. As you can see even in a 4 lines program, mutability can lead to very unexpected behaviour.</p>
<p>So immutability guaranties us that a variable will never change.
It‚Äôs not an FP specific thing but rather a best practice as it makes codes more readable and maintainable.
It also makes it easier to do concurrent programming, eliminates defensive copies etc..</p>
<p>Is mutability always bad tho? Of couse not and as often in IT, it depends! If it‚Äôs local, effects are totally controlled or allow us to optimize a performance critical part of the program etc‚Ä¶ <strong>it‚Äôs totally fine</strong>.</p>
<h3 id="pure-function"><a href="#pure-function" aria-label="pure function permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pure function</h3>
<ol>
<li>Its result depends only on its input‚Äîand not on any external state</li>
<li>It has no side effects such as mutating a global state/reference arguments, having I/O‚Ä¶</li>
</ol>
<p>‚Üí Given the same input, it always returns the same result</p>
<p>This is a pure function:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> double x <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> x</code></pre></div>
<p>Naturally it shouldn‚Äôt call unpure code:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> get<span class="token punctuation">_</span>week<span class="token punctuation">_</span>day <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">let</span> now <span class="token operator">=</span> Unix<span class="token punctuation">.</span>time <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|></span> Unix<span class="token punctuation">.</span>localtime <span class="token keyword">in</span>
  now<span class="token punctuation">.</span>tm<span class="token punctuation">_</span>wday</code></pre></div>
<p><code class="language-text">Unix.time</code> is not pure and will always returns a different result. Impurity is contagious. Thus <code class="language-text">get_week_day</code> is not pure. </p>
<p>There are many benefits to pure functions‚Äîeasy to test, predictables, make the code easier to reason about. They also enable optimizations such as memoization, parallelization.</p>
<p>I believe in a program one want to maximize pure functions and push unpure code at the edge.</p>
<h3 id="referential-transparency"><a href="#referential-transparency" aria-label="referential transparency permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Referential transparency</h3>
<p>Let‚Äôs drop some fancy jargon! Referential transparency means you can safely replace an expresssion by its value without changing the program behaviour.</p>
<p>Let‚Äôs take the expression <code class="language-text">x + f x</code>. Assuming that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span> is immutable and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span></span> is a pure function, then every time we encounter that expression in our program we could replace it by <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span> where  <code class="language-text">let y = x + f x</code></p>
<h3 id="first-class-function"><a href="#first-class-function" aria-label="first class function permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>First class function</h3>
<p>Functions are data. It means we can pass them as arguments to other functions, return them from other functions or bind them to variables.
In this way they are treated as first-class citizens.</p>
<p>In OCaml we define a function <em>double</em> that takes one argument <em>x</em> like so:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> double x <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token number">2</span></code></pre></div>
<p>This is actually a syntactic sugar over an anonymous function bound to a variable.</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> double <span class="token operator">=</span> <span class="token keyword">fun</span> x <span class="token operator">-></span> x <span class="token operator">*</span> <span class="token number">2</span></code></pre></div>
<h3 id="higher-order-function"><a href="#higher-order-function" aria-label="higher order function permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Higher order function</h3>
<p>A higher order function refers to a function that can:</p>
<ul>
<li>take one or more functions as arguments and/or</li>
<li>return a function as its result</li>
</ul>
<p>This is <strong>so powerful</strong> and allow us to build common abstraction like <code class="language-text">map</code>, <code class="language-text">fold</code> etc.</p>
<p>Let‚Äôs see <code class="language-text">List.map</code> for example:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">val</span> map <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token type variable">'a</span> <span class="token operator">-></span> <span class="token type variable">'b</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token type variable">'a</span> list <span class="token operator">-></span> <span class="token type variable">'b</span> list</code></pre></div>
<p>It takes a function <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span></span> of type <code class="language-text">&#39;a -&gt; &#39;b</code>, a list of <code class="language-text">&#39;a</code> and applies f to each element of that given list. The result is then a list of <code class="language-text">&#39;b</code>.</p>
<p>Let‚Äôs say we want to double all the elements in a list:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> doubles <span class="token operator">=</span> List<span class="token punctuation">.</span>map <span class="token punctuation">(</span><span class="token keyword">fun</span> x <span class="token operator">-></span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">(* val doubles : int list = [2; 4; 6] *)</span></code></pre></div>
<p>Or by using our <em>double</em> function previously defined:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> doubles <span class="token operator">=</span> List<span class="token punctuation">.</span>map double <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">(* val doubles : int list = [2; 4; 6] *)</span></code></pre></div>
<br />
<p>Now let‚Äôs take a look at folding <code class="language-text">fold</code>‚Äîalso known as <code class="language-text">reduce</code>‚Äîanother fundamental abstraction to walk through a list to build something new.</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">val</span> fold<span class="token punctuation">_</span>left <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token type variable">'a</span> <span class="token operator">-></span> <span class="token type variable">'b</span> <span class="token operator">-></span> <span class="token type variable">'a</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token type variable">'a</span> <span class="token operator">-></span> <span class="token type variable">'b</span> list <span class="token operator">-></span> <span class="token type variable">'a</span></code></pre></div>
<p>To sum all the elements of a list we would do:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> total <span class="token operator">=</span> List<span class="token punctuation">.</span>fold<span class="token punctuation">_</span>left <span class="token punctuation">(</span><span class="token keyword">fun</span> a b <span class="token operator">-></span> a <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token number">0</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span></code></pre></div>
<p>Or because we are FP dudes and we do <a href="https://en.wikipedia.org/wiki/Tacit_programming">point-free</a> style üòé‚Ä¶:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> total <span class="token operator">=</span> List<span class="token punctuation">.</span>fold<span class="token punctuation">_</span>left <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token number">0</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span></code></pre></div>
<p>Those two examples <code class="language-text">map</code>, <code class="language-text">fold</code> are so useful that they exist on many many other data types, not just lists.</p>
<p>We can see that both <code class="language-text">map</code> et <code class="language-text">fold_left</code> return the same kind of things‚Äîa list. This is quite convenient as it allows us to chain multiple operations.</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> total <span class="token operator">=</span>  
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token operator">|></span> List<span class="token punctuation">.</span>map double
  <span class="token operator">|></span> List<span class="token punctuation">.</span>fold<span class="token punctuation">_</span>left <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token number">0</span> 
<span class="token comment">(* val total : int = 12 *)</span></code></pre></div>
<p>Note that <code class="language-text">|&gt;</code> is named <em>pipeline operator</em>, it pipes a value into a function. It could be defined like <code class="language-text">let (|&gt;) x f = f x</code> and is left-associative.
Alternatively, we could write the above code like that:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token comment">(* Inline, boouh *)</span>
<span class="token keyword">let</span> total <span class="token operator">=</span>  List<span class="token punctuation">.</span>fold<span class="token punctuation">_</span>left <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token number">0</span> <span class="token punctuation">(</span>List<span class="token punctuation">.</span>map double <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">(* with intermediate values *)</span>
<span class="token keyword">let</span> doubles <span class="token operator">=</span>  List<span class="token punctuation">.</span>map double <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> total <span class="token operator">=</span> List<span class="token punctuation">.</span>fold<span class="token punctuation">_</span>left <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token number">0</span> doubles</code></pre></div>
<p>Personnaly I like the pipe version, it‚Äôs nice and readable and feels like the data flows through the functions. When the output of one function match the input of another, we start seeing the beauty of composition. That‚Äôs what we will see right now.</p>
<h3 id="composition"><a href="#composition" aria-label="composition permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Composition</h3>
<p>Composition means creating new <em>things</em> by combining other <em>things</em>.
In the functional programming world, we compose functions‚Äîthe building block‚Äîto make new functions.</p>
<h4 id="the-more-functional-math-view"><a href="#the-more-functional-math-view" aria-label="the more functional math view permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The more functional Math view</h4>
<p>build transformation pipeline in a neat way</p>
<p>compose smaller functions into a larger one</p>
<p>means input of one function must fit with the output of the other. Statically typed languages like OCaml ensure that‚Äôs the case.
otherwise we may want to leverage some techniques (functor, monad, etc) to compose them</p>
<p>As a function returns only one result, it also means we can compose functions that takes only one argument.
But what if the function takes multiple arguments?
That‚Äôs where currying comes into play!</p>
<p><code class="language-text">|&gt;</code> is application reversed
There is no built-in operator but we can define one like so:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">)</span> f g x <span class="token operator">=</span> f<span class="token punctuation">(</span>g<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="currying"><a href="#currying" aria-label="currying permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Currying</h3>
<p>By the way, what are all those arrows in the function type signatures? Currying! </p>
<p><strong>Currying turns a multi-parameters function into a serie of one parameter function.</strong></p>
<p>In ML languages every function is curried by default.
Which means the two following code are equivalents:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> add a b <span class="token operator">=</span> a <span class="token operator">+</span> b
<span class="token comment">(* val add : int -> int -> int *)</span>

<span class="token keyword">let</span> add <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">fun</span> a <span class="token operator">-></span> <span class="token punctuation">(</span><span class="token keyword">fun</span> b <span class="token operator">-></span> a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">(* val add : int -> int -> int *)</span></code></pre></div>
<p>Notice how the two signatures looks the same <code class="language-text">int -&gt; int -&gt; int</code>.
In fact, the former is just a syntactic sugar of the latter.</p>
<p>It feels pretty normal for us that a function returns one and only result. If some wants to return more than one, we would use a tuple or record etc‚Ä¶ </p>
<p>Well, from a FP point of view, it is the same for arguments.
As a function can‚Äôt take multiple arguments, we use currying.</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml">arg1 <span class="token operator">-></span> arg2 <span class="token operator">-></span> arg3 <span class="token operator">-></span> result</code></pre></div>
<p>Curried functions are so easy to compose due to the one-result/one-argument.
Look at that for instance:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> build<span class="token punctuation">_</span>door <span class="token operator">=</span> cut<span class="token punctuation">_</span>wood <span class="token operator">&lt;&lt;</span> chop<span class="token punctuation">_</span>wood<span class="token punctuation">(</span>üî®<span class="token punctuation">)</span> üå≥</code></pre></div>
<p>We have two functions <code class="language-text">chop_wood</code> and <code class="language-text">cut_wood</code> with different arities, respectively two and one.</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> chop<span class="token punctuation">_</span>wood tool trees <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">let</span> cut<span class="token punctuation">_</span>wood wood <span class="token operator">=</span> </code></pre></div>
<p>Thanks to currying we are still able  to compose them.</p>
<p>We also get partial application for free.
Which allows us to specialize a function</p>
<p>Let‚Äôs see for example the <code class="language-text">add</code> function:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token keyword">let</span> add a b <span class="token operator">=</span> a <span class="token operator">+</span> b
<span class="token comment">(* val add : int -> int -> int *)</span>

<span class="token comment">(* when applying the first argument 5 we get
a new function expecting the 2nd argument *)</span>
<span class="token keyword">let</span> addFive <span class="token operator">=</span> add <span class="token number">5</span>
<span class="token comment">(* val addFive : int -> int *)</span>

<span class="token comment">(* when we give it that second argument, we get the result *)</span>
<span class="token keyword">let</span> six <span class="token operator">=</span> addFive <span class="token number">6</span>
<span class="token comment">(* val six : int *)</span></code></pre></div></div><div><span style="font-size:0"></span><div class="vim-cursor"></div></div><hr/><ul id="blog-post-footer"><li><a rel="prev" href="/git-rebase/">‚Üê <!-- -->Demystify git rebase with animations</a></li><li></li></ul></div></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-125838540-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"fp-basics-a0e","path":"/fp-basics/"};window.dataPath="859/path---fp-basics-a-0-e-465-WU4nLcah9mbGrEn2A4qQfAWhFqE";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-de4e1f59c3e3b0d6a3ba.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-2ee324bf92ea9aaecc36.js"],"component---src-pages-404-js":["/component---src-pages-404-js-002d4a31d1d9e9e5e4c7.js"],"component---src-pages-activities-js":["/component---src-pages-activities-js-f0e34ca4bcabe5158f42.js"],"component---src-pages-git-rebase-figure-1-js":["/component---src-pages-git-rebase-figure-1-js-30c8f7b33e6da43a6a55.js"],"component---src-pages-git-rebase-figure-2-js":["/component---src-pages-git-rebase-figure-2-js-2d4dece0033242d77caa.js"],"component---src-pages-git-rebase-figure-3-js":["/component---src-pages-git-rebase-figure-3-js-28fd1fa2382ece853899.js"],"component---src-pages-git-js":["/component---src-pages-git-js-366344b1c43cd9e09930.js"],"component---src-pages-index-js":["/component---src-pages-index-js-7b46b5484917bfde82f7.js"],"pages-manifest":["/pages-manifest-53361f724d99ddb15036.js"]};/*]]>*/</script><script src="/webpack-runtime-e66a3ce9287d241d7855.js" async=""></script><script src="/app-de4e1f59c3e3b0d6a3ba.js" async=""></script><script src="/2-1c0803bc6ab86b1d9f68.js" async=""></script><script src="/3-1cc8080b6edca50ed51d.js" async=""></script><script src="/component---src-templates-blog-post-js-2ee324bf92ea9aaecc36.js" async=""></script><script src="/styles-9dcf0f99f3c7fd2e7438.js" async=""></script></body></html>