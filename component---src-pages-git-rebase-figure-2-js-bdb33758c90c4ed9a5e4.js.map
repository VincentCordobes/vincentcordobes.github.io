{"version":3,"sources":["webpack:///./src/pages/git-rebase-figure2.js","webpack:///./src/components/animated-ascii.js"],"names":["Figure1","React","createElement","AnimatedAscii","steps","positions","renderExtra","stepNumber","withCounter","count","Somewhere","exitX","exitY","transform","key","transition","type","stiffness","damping","Line","posed","div","pre","opacity","duration","enter","exit","LineT","x","_ref","preX","_ref2","forwardRef","_ref3","ref","children","style","fontSize","color","position","margin","normalize","y","_ref4","_ref5","buildLine","counter","_ref6","ascii","prefix","buildStat","_ref7","fn","text","replace","Rebase","_ref9","step","setStep","useState","Layout","width","marginRight","marginLeft","marginTop","userSelect","lineHeight","cursor","onClick","length","className","PoseGroup","preEnterPose","_ref8","stepsLines","map","_","rest","split","some","linePosition","Error","every","stepLines","stepIndex","line","lineIndex","linePositions","config","i","push","buildAnimatedAscii"],"mappings":"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","file":"component---src-pages-git-rebase-figure-2-js-bdb33758c90c4ed9a5e4.js","sourcesContent":["import React, { useState, useEffect, forwardRef } from \"react\"\nimport posed, { PoseGroup } from \"react-pose\"\nimport Layout from \"../components/layout\"\nimport AnimatedAscii, {\n  Somewhere,\n  withCounter,\n} from \"../components/animated-ascii\"\n\nconst Figure1 = () => {\n  const steps = [\n    `\n            E---F  topicB\n           /\n      C---D  topicA\n     /\nA---B  master`,\n    `\n    topicB\n    |\n    | C---D  topicA\n    ↓/\nA---B  master`,\n    `\n     E'--F' topicB\n    /\n    | C---D  topicA\n    |/\nA---B  master`,\n  ]\n  const positions = [[-150, 80, 70], [-70, 0, 70], [], [], []]\n\n  return (\n    <AnimatedAscii\n      steps={steps}\n      positions={positions}\n      renderExtra={(stepNumber) =>\n        stepNumber == 1 &&\n        withCounter((count) => (\n          <Somewhere\n            exitX={-30}\n            exitY={-15}\n            transform={\"translate(68px, -94px)\"}\n            key={`somewhere${count}`}\n          >\n            E---F\n          </Somewhere>\n        ))\n      }\n    />\n  )\n}\n\nexport default Figure1\n","import React, { useState, useEffect, forwardRef } from \"react\"\nimport posed, { PoseGroup } from \"react-pose\"\nimport Layout from \"../components/layout\"\n\n// Don't look at this please this is an\n// MVP of smth but it's absolutely horrible\n// You have been warned...\n\nconst transition = { type: \"spring\", stiffness: 300, damping: 50 }\n\nconst Line = posed.div({\n  pre: {\n    opacity: 0,\n    transition: { duration: 500 },\n  },\n  enter: {\n    opacity: 1,\n    transition: { duration: 500 },\n  },\n  exit: {\n    opacity: 0,\n    transition: { duration: 500 },\n  },\n})\n\nconst LineT = posed.div({\n  pre: {\n    opacity: 0,\n    x: ({ preX }) => preX,\n    transition,\n  },\n  enter: {\n    opacity: 1,\n    x: 0,\n    transition,\n  },\n  exit: {\n    opacity: 0,\n    x: ({ exitX }) => exitX,\n    transition,\n  },\n})\n\nexport const Somewhere = posed(\n  forwardRef(({ children, style, transform }, ref) => (\n    <div ref={ref} style={style}>\n      <div\n        style={{\n          fontSize: 13,\n          color: \"#b1b1b1\",\n          position: \"absolute\",\n          margin: \"auto\",\n          transform,\n        }}\n      >\n        {normalize(`tmp: ${children}`)}\n      </div>\n    </div>\n  ))\n)({\n  pre: {\n    opacity: 0,\n    x: 0,\n    y: 0,\n    transition: { duration: 500 },\n  },\n  enter: {\n    opacity: 1,\n    x: 0,\n    y: 0,\n    transition: { duration: 500 },\n  },\n  exit: {\n    opacity: 0,\n    x: ({ exitX }) => exitX,\n    y: ({ exitY }) => exitY,\n    transition,\n  },\n})\n\nconst buildLine = (() => {\n  let counter = 0\n  return ({ ascii, prefix, preX, exitX }) => (\n    <LineT preX={preX} exitX={exitX} key={ascii + counter++}>\n      {normalize(ascii)}\n    </LineT>\n  )\n})()\n\nconst buildStat = (() => {\n  let counter = 0\n  return ({ ascii }) => <Line key={ascii + counter}>{normalize(ascii)}</Line>\n})()\n\nexport const withCounter = (() => {\n  let counter = 0\n  return (fn) => fn(counter++)\n})()\n\nconst steps = (prefix) => [\n  [\n    buildLine({ ascii: \"      X---Y---Z  topic\", preX: 40, exitX: -87 }),\n    buildLine({ ascii: \"     /\", preX: 40, exitX: 32 }),\n    buildStat({ ascii: \"A---B---C  master\" }),\n  ],\n  [\n    buildLine({ ascii: \"        topic\", preX: 87, exitX: 50 }),\n    buildLine({ ascii: \"        ↓\", preX: -32, exitX: 10 }),\n    buildStat({ ascii: \"A---B---C  master\" }),\n    <Somewhere key={`somewhere${prefix}`}>X---Y---Z</Somewhere>,\n  ],\n  [\n    buildLine({ ascii: \"          X'--Y'--Z' topic\", preX: -40, exitX: -40 }),\n    buildLine({ ascii: \"         /\", preX: -10, exitX: -40 }),\n    buildStat({ ascii: \"A---B---C  master\" }),\n  ],\n]\n\nconst buildAnimatedAscii = ({ steps, positions, renderExtra }) => {\n  const stepsLines = steps.map((ascii) => {\n    const [_, ...rest] = ascii.split(\"\\n\")\n    return rest\n  })\n\n  const missingPosition = positions.some(\n    (linePosition) =>\n      linePosition.length !== stepsLines.length && linePosition.length > 0\n  )\n  if (missingPosition) {\n    throw new Error(\"There must be positions for each steps!\")\n  }\n\n  const m = stepsLines.every(\n    (stepLines) => stepLines.length === positions.length\n  )\n  if (!m) {\n    throw new Error(\"Positions.length must be equal to the number of lines\")\n  }\n\n  return stepsLines\n    .map((step, stepIndex) => {\n      return step.map((line, lineIndex) => {\n        const linePositions = positions[lineIndex]\n        if (!linePositions.length) {\n          return buildStat({ ascii: line })\n        } else {\n          const config = {\n            ascii: line,\n            preX: -linePositions[(stepIndex - 1 + steps.length) % steps.length],\n            exitX: linePositions[stepIndex],\n          }\n          return buildLine(config)\n        }\n      })\n    })\n    .map((step, i) => {\n      renderExtra && step.push(renderExtra(i))\n      return step\n    })\n}\n\nconst DISTANCE_CHAR_RATIO = 0.1\n\nfunction Rebase({ steps, positions, renderExtra }) {\n  const [step, setStep] = useState(0)\n  return (\n    <Layout>\n      <div\n        style={{\n          width: 272,\n          marginRight: \"auto\",\n          marginLeft: \"auto\",\n          marginTop: -5,\n          userSelect: \"none\",\n          position: \"relative\",\n          lineHeight: 1.5,\n        }}\n      >\n        <figure\n          style={{ cursor: \"pointer\" }}\n          onClick={() => setStep((step + 1) % steps.length)}\n        >\n          <div className=\"mono\" style={{ fontSize: 16 }}>\n            <PoseGroup preEnterPose=\"pre\">\n              {buildAnimatedAscii({ steps, positions, renderExtra })[step]}\n            </PoseGroup>\n          </div>\n          <figcaption style={{ marginTop: 15 }}>\n            Step {step} (tap to animate)\n          </figcaption>\n        </figure>\n      </div>\n    </Layout>\n  )\n}\n\nfunction normalize(text) {\n  return text.replace(/\\s/g, \"\\u00A0\")\n}\n\nexport default Rebase\n"],"sourceRoot":""}