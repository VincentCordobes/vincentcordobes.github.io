<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.96022dfe019bd59c5ff2.css">*,:after,:before{box-sizing:border-box}body{color:#3d3d3d;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Helvetica Neue,Arial,sans-serif;font-size:16px;line-height:1.625;text-rendering:optimizeLegibility;margin:0 auto;padding:20px;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased}@media (min-width:768px){body{font-size:17.5px}}a{color:#0366d6;text-decoration:none}a:hover{text-decoration:underline}p{margin:0 0 1em}#layout{max-width:42rem;margin-left:auto;margin-right:auto}@media (min-width:1024px){#layout{max-width:48rem}#container{width:87.5%}}h1,h2,h3,h4{line-height:normal;margin:0;font-weight:500}h1{font-size:2em}h2,h3,h4{margin-top:1.5em;margin-bottom:.625em}h2{font-size:1.5em}h3{font-size:1.25em}h4{font-size:1.05em}ol,ul{padding-left:0;margin:5px 0 1em;list-style-type:none}ol>li,ul>li{text-indent:0;margin:.3em 0}p+ol,p+ul{margin-top:-.7em}ol{list-style-type:decimal}hr{background-color:#e1e4e8;border:0;height:1px;margin:24px 0;padding:0}.vim-cursor{display:inline-block;background-color:#5f5f5e;color:#fff;margin-bottom:-5px;margin-left:3px;width:10px;height:18px}blockquote{margin:1.5em 0 1.5em 1.8em;color:#5a5a5a;position:relative;font-style:italic}blockquote:before{font-family:georgia,serif;font-size:3.6em;position:absolute;content:"\201C";line-height:1em;font-style:normal;left:-.5em;top:0}cite{display:block;text-align:right;color:#3d3d3d}cite:before{content:"\2014   "}table{border:2px solid #000;border-right:none;border-left:none;border-collapse:collapse;min-width:100%;margin:2em auto}@media (min-width:576px){table{min-width:20rem}}td,th{padding:5px 10px;text-align:left}th{border-bottom:1px solid #000}.mono{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace}#post-list .date{color:#aaa}figure{margin:0 0 1.4em}#blog-post figure{margin-top:1.4em}figcaption:before{font-variant:small-caps}figcaption{text-align:center;margin-top:1em;margin-bottom:1.4em}iframe{border:none;width:1px;min-width:100%;margin:0 auto 1em}img{max-width:100%;display:block;margin:0 auto}strong{font-weight:500}.katex-display{overflow-x:auto;overflow-y:hidden}code[class*=language-],pre[class*=language-]{color:#333;background:none;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#fafafa}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-makefile .token.symbol,.language-markdown .token.url{color:#795da3}.language-makefile .token.variable{color:#183691}.language-bash .token.keyword,.language-makefile .token.builtin{color:#0086b3}code{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace}:not(pre)>code[class*=language-],pre[class*=language-]{font-size:.9em}.gatsby-highlight pre[class*=language-]:before{background:#ddd;border-radius:0 0 4px 4px;font-size:.75rem;font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;letter-spacing:.075em;line-height:1;padding:.25rem .5rem;position:absolute;right:1.5rem;text-align:right;top:0}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}#blog-post nav>ul{padding:0}#blog-post-content ol,#blog-post-content ul{padding-left:1.5em}#blog-post-content ul>li{list-style-type:disc}#blog-post-footer{display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:0}</style><meta name="generator" content="Gatsby 2.2.5"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">Demystify git rebase with animations - Vincent&#x27;s page</title><link data-react-helmet="true" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous"/><meta data-react-helmet="true" name="google-site-verification" content="kjM2mfXvQ9XJ7BqEPTHNHWZ62wJsC5G_GtuPX1oy0EY"/><meta data-react-helmet="true" name="description" content="Interactive ASCII arts to understand git rebase"/><meta data-react-helmet="true" property="og:url" content="https://vincentcordobes.github.io/git-rebase/"/><meta data-react-helmet="true" property="og:title" content="Demystify git rebase with animations"/><meta data-react-helmet="true" name="og:description" content="Interactive ASCII arts to understand git rebase"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@VincentCordobes"/><meta data-react-helmet="true" name="twitter:title" content="Demystify git rebase with animations"/><meta data-react-helmet="true" name="twitter:description" content="Interactive ASCII arts to understand git rebase"/><meta data-react-helmet="true" property="og:image" content="https://vincentcordobes.github.io/static/3211122683a9a05c6be192d516c559f3/6b179/ascii-preview.png"/><meta data-react-helmet="true" name="twitter:image" content="https://vincentcordobes.github.io/static/3211122683a9a05c6be192d516c559f3/6b179/ascii-preview.png"/><link as="script" rel="preload" href="/styles-9dcf0f99f3c7fd2e7438.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-b840d9351a2166e0b362.js"/><link as="script" rel="preload" href="/3-a354a6ec2de6d6ae3d36.js"/><link as="script" rel="preload" href="/2-39ed271ac3c2a4ef5b10.js"/><link as="script" rel="preload" href="/app-de4e1f59c3e3b0d6a3ba.js"/><link as="script" rel="preload" href="/webpack-runtime-f05f4e94aaa4092d8e62.js"/><link as="fetch" rel="preload" href="/static/d/378/path---git-rebase-630-600-TbhvjH1yRXFZe14cbehTKQAOM.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div id="layout"><div id="container"><div id="blog-post"><header><nav><ul><li><a rel="home" href="/">Home</a></li></ul></nav></header><h1>Demystify git rebase with animations</h1><p><small class="mono">January 18, 2019</small></p><div id="blog-post-content"><p>There are lots of commands in git and we can often achieve our goal in several different ways. I usually manage to get my stuff done with just few commands like rebase, reset, cherry-pick. But sometimes I felt I was doing it ineffectively. Like for example squashing all commits into a single one so that it will be easier to rebase afterward.
Even though I heard that rebasing with the <code class="language-text">onto</code> option could be useful, I never took the time to <em>man</em> it… until recently. I guess now is a good time to write something about it.</p>
<!-- > Actually I just want to inaugurate my blog... any reason is a good reason ☝️ -->
<h2 id="when-to-use-it"><a href="#when-to-use-it" aria-label="when to use it permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>When to use it?</h2>
<p>Here are some use-cases:</p>
<ul>
<li>we want to cherry-pick multiples commits</li>
<li>we have created a branch from the wrong one and we want to bring all the commits to the right one</li>
<li>we want to delete a range of commits</li>
</ul>
<p>Basically it all comes down to this: <strong>apply a range of commits somewhere else</strong> </p>
<h2 id="rebase"><a href="#rebase" aria-label="rebase permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rebase</h2>
<p>Let’s begin with a little reminder about how rebase works in its simplest form. From the <em>man</em> (unix) we get:</p>
<!-- ```
git rebase upstream [branch]
``` -->
<pre class="language-text">
<code class="language-text">git rebase <span style="background:#ffe5ee">upstream</span> <span style="background:#ffefc0">[branch]</span></code>
</pre>
<p>I am gonna give some examples and intentionally avoid any short-hand way at first.</p>
<iframe style="height:125px" scrolling="no" src="/git-rebase-figure1/"></iframe>
<!-- I am gonna give some examples and intentionally  -->
<!-- I'll intentionally avoid any short-hand way at first. -->
<!-- The ASCII art schema is animated, you can click on it to go through the steps. -->
<!-- Let's say you have forked a _topic_ branch from _master B_ but master has evolve and you want to update the_topic_ branch according to master -->
<!-- When you run the command `git rebase master topic` then: -->
<p>When we run the command <code class="language-text">git rebase <span style="background:#ffe5ee">master</span> <span style="background:#ffefc0">topic</span></code> then:</p>
<ol start="0">
<li>Git performs a <code class="language-text">checkout topic</code></li>
<li>The index and working tree are reset to master. This is exactly like running <code class="language-text">git reset --hard master</code> except that commits X, Y, Z are put aside for later use. Basically all commits that are in <em>topic</em> but not in <em>master</em> (<code class="language-text">master..topic</code>)</li>
<li>Those commits are applied one by one on master. This is like <em>cherry-picking</em> them.</li>
</ol>
<p>Step 2 may fail applying the commits. Don’t worry, be happy, we can either resolve the conflict by running <code class="language-text">git rebase --continue</code> or get back to the state we left before the rebase with <code class="language-text">git rebase --abort</code></p>
<p><strong>Note</strong> If we already are on the <em>topic</em> branch (<em>HEAD</em> → <em>topic</em>) then we can omit the <span style="background:#ffefc0">branch</span> arg and just type <code class="language-text">git rebase master</code> (step 0 is skipped) This is a common short-hand.</p>
<h2 id="what-about-the-code-classlanguage-text--ontocode-option"><a href="#what-about-the-code-classlanguage-text--ontocode-option" aria-label="what about the code classlanguage text  ontocode option permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What about the <code class="language-text">--onto</code> option?</h2>
<p>The man tells us:</p>
<!-- ```
git rebase --onto newbase upstream [branch]
``` -->
<pre class="language-text">
<code class="language-text">git rebase --onto <span style="background:#eff3c5">newbase</span> <span style="background:#ffe5ee">upstream</span> <span style="background:#ffefc0">[branch]</span></code>
</pre>
<p>The only difference is in step 1: git hard resets to <span style="background:#eff3c5">newbase</span> instead of <em>upstream</em>.
Step 2 remains the same, commits <span style="background:#ffe5ee">upstream</span>..<span style="background:#ffefc0">branch</span> are applied. </p>
<h4 id="lets-take-an-example"><a href="#lets-take-an-example" aria-label="lets take an example permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lets take an example</h4>
<p>We have created a branch <em>topicB</em> from <em>topicA</em>  but it was a “mistake”. The work on <em>topicB</em> is totally unrelated to <em>topicA</em> and thus doesn’t depend on it. </p>
<iframe style="height:171px" scrolling="no" src="/git-rebase-figure2/"></iframe>
<p>So naturally, we need to fix this unfortunate mistake to make <em>topicB</em> fork from <em>master</em>. To do so we can run:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">git rebase --onto master topicA topicB</code></pre></div>
<p>As seen previously, step 1 is hard resetting to master, step 2 is applying commits <code class="language-text">topicA..topicB</code> .</p>
<h4 id="another-example"><a href="#another-example" aria-label="another example permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Another example</h4>
<p>I told you in the intro that we could also remove a range of commits by using this option.
Well lets say we have a branch like the one below and want to get rid of commits <em>F</em> and <em>G</em>. </p>
<iframe style="height:76px" scrolling="no" src="/git-rebase-figure3/"></iframe>
<p>We can run:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">git rebase --onto E G I</code></pre></div>
<p>Step 1 is a hard reset to <em>E</em> and step 2 is picking <code class="language-text">G..I</code>
(as a reminder <em>G</em> is excluded: this is how <code class="language-text">..</code> works in git)
<em>F</em> and <em>G</em> are removed.</p>
<h2 id="lets-be-play-with-the-past"><a href="#lets-be-play-with-the-past" aria-label="lets be play with the past permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Let’s be play with the past?</h2>
<p>The <code class="language-text">-i</code> option lets us interact with any commits. We can move, squash, delete, rename, edit… It’s on of the most powerful git command that allows us to do pretty much anything with the git history.</p></div><div><span style="font-size:0"></span><div class="vim-cursor"></div></div><hr/><ul id="blog-post-footer"><li><a rel="prev" href="/ritter-toussaint/">← <!-- -->Cercle et rectangle minimum</a></li><li></li></ul></div></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-125838540-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"git-rebase-630","path":"/git-rebase/"};window.dataPath="378/path---git-rebase-630-600-TbhvjH1yRXFZe14cbehTKQAOM";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-de4e1f59c3e3b0d6a3ba.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-b840d9351a2166e0b362.js"],"component---src-pages-404-js":["/component---src-pages-404-js-002d4a31d1d9e9e5e4c7.js"],"component---src-pages-activities-js":["/component---src-pages-activities-js-448b130102c014cb80cd.js"],"component---src-pages-git-rebase-figure-1-js":["/component---src-pages-git-rebase-figure-1-js-3001dc31fde4e5ea8b4f.js"],"component---src-pages-git-rebase-figure-2-js":["/component---src-pages-git-rebase-figure-2-js-62ccad431367752041e2.js"],"component---src-pages-git-rebase-figure-3-js":["/component---src-pages-git-rebase-figure-3-js-2fa729b14f835a84cd6f.js"],"component---src-pages-git-js":["/component---src-pages-git-js-88d386fdd7e8540d563b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-f1408e132280f4d55cc6.js"],"pages-manifest":["/pages-manifest-0e55fabe29e3d9f8a88e.js"]};/*]]>*/</script><script src="/webpack-runtime-f05f4e94aaa4092d8e62.js" async=""></script><script src="/app-de4e1f59c3e3b0d6a3ba.js" async=""></script><script src="/2-39ed271ac3c2a4ef5b10.js" async=""></script><script src="/3-a354a6ec2de6d6ae3d36.js" async=""></script><script src="/component---src-templates-blog-post-js-b840d9351a2166e0b362.js" async=""></script><script src="/styles-9dcf0f99f3c7fd2e7438.js" async=""></script></body></html>